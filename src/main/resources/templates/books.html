<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Manage Books</title>

    <!-- Bootstrap -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"/>

    <!-- Icons -->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

    <style>

        body {
            background: #eef2f7;
            font-family: "Segoe UI", sans-serif;
        }

        /* NAVBAR */
        .navbar-custom {
            background: #0047b3;
            padding: 14px 25px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.18);
        }

        .navbar-custom .navbar-brand {
            color: white;
            font-weight: 700;
            font-size: 22px;
        }

        /* PAGE TITLE */
        .page-title {
            font-size: 32px;
            color: #0047b3;
            font-weight: 700;
            margin-bottom: 20px;
        }

        /* TABLE STYLE */
        .table-container {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.12);
        }

        table thead {
            background: #0069ff;
            color: white;
        }

        table tbody tr:hover {
            background: #f1f6ff;
        }

        .btn-edit {
            background: #ffc107;
            color: black;
        }

        .btn-delete {
            background: #dc3545;
            color: white;
        }

        .btn-add {
            background: #198754;
            color: white;
            font-weight: 600;
            border-radius: 8px;
        }

        .search-box {
            max-width: 320px;
        }

    </style>
</head>

<body>

<!-- NAVBAR -->
<nav class="navbar navbar-custom">
    <a class="navbar-brand"><i class="fa-solid fa-book-open me-2"></i>Manage Books</a>

    <a href="/admin" class="btn btn-light">
        <i class="fa-solid fa-arrow-left"></i> Back
    </a>
</nav>

<div class="container py-4">

    <h2 class="page-title text-center">
        ðŸ“š Library Books Overview
    </h2>

    <!-- SEARCH + ADD -->
    <div class="d-flex justify-content-between mb-3">

        <input id="searchInput" type="text"
               class="form-control search-box"
               placeholder="Search books..."
               onkeyup="searchBooks()">

        <a href="/admin/books/add" class="btn btn-add">
            <i class="fa-solid fa-plus"></i> Add New Book
        </a>

    </div>

    <!-- BOOK TABLE -->
    <div class="table-container">

        <table class="table table-bordered table-hover">

            <thead>
            <tr>
                <th>Title</th>
                <th>Author</th>
                <th>Edition</th>
                <th>Year</th>
                <th>Category</th>
                <th>Type</th>
                <th>Quantity</th>
                <th>Available</th>
                <th style="width:150px;">Actions</th>
            </tr>
            </thead>

            <tbody id="bookTableBody">
            <tr th:each="book : ${books}"
                th:data-title="${book.title}"
                th:data-author="${book.author}"
                th:data-category="${book.category}">

                <td th:text="${book.title}"></td>
                <td th:text="${book.author}"></td>
                <td th:text="${book.edition}"></td>
                <td th:text="${book.year}"></td>
                <td th:text="${book.category}"></td>
                <td th:text="${book.type}"></td>
                <td th:text="${book.quantity}"></td>
                <td th:text="${book.available} ? 'Yes' : 'No'"></td>

                <td>
                    <a th:href="@{'/admin/books/edit/' + ${book.id}}"
                       class="btn btn-sm btn-edit">
                        <i class="fa-solid fa-pen"></i>
                    </a>

                    <a th:href="@{'/admin/books/delete/' + ${book.id}}"
                       onclick="return confirm('Are you sure?');"
                       class="btn btn-sm btn-delete">
                        <i class="fa-solid fa-trash"></i>
                    </a>
                </td>

            </tr>
            </tbody>

        </table>

    </div>

</div>

<!-- SEARCH SCRIPT -->
<script>
    function searchBooks() {
        let input = document.getElementById("searchInput").value.toLowerCase();
        let rows = document.querySelectorAll("#bookTableBody tr");

        rows.forEach(row => {
            let text = row.innerText.toLowerCase();
            row.style.display = text.includes(input) ? "" : "none";
        });
    }
</script>

</body>
</html>
