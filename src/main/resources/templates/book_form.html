<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${ebook.id == null} ? 'Add New Book' : 'Edit Book'"></title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          rel="stylesheet">

    <style>
        .card { border-radius: 12px; }
    </style>
</head>

<body class="bg-light">

<div class="container mt-5 mb-5">

    <div class="card p-4 shadow-sm">

        <h3 class="text-center text-primary mb-4">
            <span th:text="${ebook.id == null} ? 'ðŸ“• Add New Digital Book' : 'âœ Edit Digital Book'"></span>
        </h3>

        <form th:action="${ebook.id == null} ? @{/admin/books/add}
                                            : @{/admin/books/edit/{id}(id=${ebook.id})}"
              th:object="${ebook}"
              method="post"
              enctype="multipart/form-data">

            <!-- TITLE -->
            <div class="mb-3">
                <label class="form-label fw-semibold">Title</label>
                <input type="text" th:field="*{title}" class="form-control" required>
            </div>

            <!-- AUTHOR -->
            <div class="mb-3">
                <label class="form-label fw-semibold">Author</label>
                <input type="text" th:field="*{author}" class="form-control" required>
            </div>

            <!-- YEAR -->
            <div class="mb-3">
                <label class="form-label fw-semibold">Year</label>
                <input type="number" th:field="*{year}" class="form-control"
                       min="1500" max="2030" required>
            </div>

            <!-- CATEGORY -->
            <div class="mb-3">
                <label class="form-label fw-semibold">Category</label>

                <select th:field="*{category}" class="form-select" required>
                    <option value="">-- select category --</option>
                    <option value="art">Art</option>
                    <option value="fiction-romance-thriller">Fiction-Romance-Thriller</option>
                    <option value="medicine">Medicine</option>
                    <option value="philosophy">Philosophy</option>
                    <option value="science">Science</option>
                    <option value="technology">Technology</option>
                </select>
            </div>

            <!-- UPLOAD FILE -->
            <div class="mb-3">
                <label class="form-label fw-semibold">PDF File</label>
                <input type="file" name="file" accept="application/pdf" class="form-control">

                <div th:if="${ebook.fileName != null}">
                    <small class="text-muted">
                        Current file:
                        <a th:href="@{'/admin/books/open/' + ${ebook.id}}" target="_blank">
                            Open PDF
                        </a>
                    </small>
                </div>
            </div>

            <!-- BUTTONS -->
            <div class="text-center mt-4">
                <button type="submit" class="btn btn-success px-4 btn-lg">Save</button>
                <a href="/admin/books" class="btn btn-secondary px-4 btn-lg">Cancel</a>
            </div>

        </form>

    </div>

</div>

</body>
</html>
